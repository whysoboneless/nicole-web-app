<!-- Quick API Key Modal Component -->
<div x-data="quickApiKeyModal()" x-show="$store.apiKeyModal.show" x-transition class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
    <div class="bg-white rounded-xl p-6 max-w-sm w-full mx-4" @click.away="$store.apiKeyModal.show = false">
        <h3 class="text-lg font-bold text-gray-900 mb-4 flex items-center">
            <span class="text-xl mr-2">üîë</span>
            Quick Add API Key
        </h3>
        
        <form @submit.prevent="addKey()">
            <div class="space-y-4">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Service</label>
                    <select x-model="form.service" required 
                            class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500">
                        <option value="">Select service...</option>
                        <option value="anthropic">üß† Anthropic Claude (Required)</option>
                        <option value="youtube">üì∫ YouTube API</option>
                        <option value="replicate">üîÑ Replicate</option>
                        <option value="elevenlabs">üéôÔ∏è ElevenLabs</option>
                    </select>
                </div>
                
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">API Key</label>
                    <div class="relative">
                        <input :type="showKey ? 'text' : 'password'" 
                               x-model="form.key" required
                               placeholder="Enter your API key"
                               class="w-full px-3 py-2 pr-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500">
                        <button type="button" @click="showKey = !showKey" 
                                class="absolute inset-y-0 right-0 pr-3 flex items-center">
                            <span x-text="showKey ? 'üôà' : 'üëÅÔ∏è'"></span>
                        </button>
                    </div>
                </div>
            </div>
            
            <div class="flex justify-end space-x-3 mt-6">
                <button type="button" @click="$store.apiKeyModal.show = false" 
                        class="px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors">
                    Cancel
                </button>
                <button type="submit" 
                        class="px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors">
                    Add Key
                </button>
            </div>
        </form>
    </div>
</div>

<script>
function quickApiKeyModal() {
    return {
        showKey: false,
        form: {
            service: '',
            key: ''
        },
        
        addKey() {
            if (!this.form.service || !this.form.key) {
                alert('Please fill in all fields');
                return;
            }
            
            // In a real app, this would make an API call
            console.log('Adding API key for:', this.form.service);
            alert(`‚úÖ ${this.form.service} API key added successfully!`);
            
            // Reset form and close modal
            this.form = { service: '', key: '' };
            this.$store.apiKeyModal.show = false;
        }
    }
}

// Global Alpine.js store for modal state
document.addEventListener('alpine:init', () => {
    Alpine.store('apiKeyModal', {
        show: false,
        open() {
            this.show = true;
        },
        close() {
            this.show = false;
        }
    });
});
</script>
